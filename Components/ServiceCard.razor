@using Radzen
@using Radzen.Blazor
@using BlazorBFA.ViewModels

<RadzenCard Class="service-card-compact" Style="height:100%; padding:0; border:1px solid #e2e8f0; border-radius:1rem; transition:all 0.3s ease; box-shadow:0 2px 12px rgb(0 0 0 / 0.06); overflow:hidden; background:white;">
    
@* Image container *@
<div class="service-image-container">
    <RadzenImage Path="@Service.Image" 
                 Alt="@Service.Title" 
                 Style="width:100%; height:100%; object-fit:cover; transition:transform 0.3s ease;" 
                 Class="service-image" />
        
    @* Gradient overlay *@
    <div class="service-image-overlay"></div>
        
    @* Floating icon badge *@
    <div class="service-icon-badge">
        <RadzenIcon Icon="@GetIcon(Service.Icon)" Style="color:white; font-size:26px;" />
    </div>
</div>
    
@* Content section *@
<div class="service-content">
    <RadzenText TextStyle="TextStyle.H6" Class="service-title">
        @Service.Title
    </RadzenText>
        
    <RadzenText Text="@Service.Description" Class="service-description" />
        
    @* Features list *@
    <RadzenStack Gap="5px" Class="service-features">
        @foreach (var feature in Service.Features.Take(2))
        {
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Start" Gap="8px" Class="service-feature-item">
                <RadzenIcon Icon="check_circle" Style="color:var(--accent-color); font-size:18px; flex-shrink:0; margin-top:2px;" />
                <RadzenText TextStyle="TextStyle.Body2" Class="service-feature-text">@feature</RadzenText>
            </RadzenStack>
        }
    </RadzenStack>
        
    @* Learn more link *@
    <RadzenLink Path="#contact" Class="service-link">
        Scopri di più
        <RadzenIcon Icon="arrow_forward" Style="font-size:18px;" Class="arrow-icon" />
    </RadzenLink>
</div>
</RadzenCard>

<style>
    .service-card-compact {
        display: flex;
        flex-direction: row;
    }
    
    .service-image-container {
        position: relative;
        width: 192px;
        min-width: 192px;
        overflow: hidden;
    }
    
    .service-image-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, transparent 60%, rgba(255,255,255,0.8) 100%);
    }
    
    .service-icon-badge {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 58px;
        height: 58px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(0, 112, 160, 0.3);
        z-index: 2;
    }
    
    .service-content {
        padding: 1.35rem 1.75rem;
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        min-width: 0;
        overflow: hidden;
    }
    
    .service-title {
        font-weight: 600;
        color: var(--text-dark);
        font-family: 'Fraunces', Georgia, serif;
        margin-bottom: 0.55rem;
        font-size: 1.5rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    .service-description {
        color: var(--text-muted);
        font-size: 1.1rem;
        line-height: 1.5;
        margin-bottom: 1rem;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    .service-features {
        margin-bottom: 1rem;
    }
    
    .service-feature-item {
        min-width: 0;
    }
    
    .service-feature-text {
        color: var(--text-muted);
        font-size: 1rem;
        line-height: 1.4;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    .service-link {
        color: var(--primary-color);
        font-weight: 600;
        font-size: 1.1rem;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
    }
    
    /* Mobile styles - stack vertically */
    @@media (max-width: 768px) {
        .service-card-compact {
            flex-direction: column !important;
        }
        
        .service-image-container {
            width: 100% !important;
            min-width: 100% !important;
            height: 160px;
        }
        
        .service-image-overlay {
            background: linear-gradient(180deg, transparent 60%, rgba(255,255,255,0.8) 100%) !important;
        }
        
        .service-icon-badge {
            width: 50px;
            height: 50px;
        }
        
        .service-icon-badge .rz-icon {
            font-size: 22px !important;
        }
        
        .service-content {
            padding: 1rem 1.25rem !important;
        }
        
        .service-title {
            font-size: 1.25rem !important;
        }
        
        .service-description {
            font-size: 0.95rem !important;
            -webkit-line-clamp: 2;
        }
        
        .service-feature-text {
            font-size: 0.9rem !important;
        }
        
        .service-link {
            font-size: 1rem !important;
        }
    }
    
    /* Very small screens */
    @@media (max-width: 375px) {
        .service-content {
            padding: 0.875rem 1rem !important;
        }
        
        .service-title {
            font-size: 1.1rem !important;
        }
        
        .service-description {
            font-size: 0.875rem !important;
        }
        
        .service-feature-text {
            font-size: 0.85rem !important;
        }
        
        .service-image-container {
            height: 140px;
        }
    }
</style>

@code {
    [Parameter] public ServiceModel Service { get; set; } = new();

    private static string GetIcon(string icon) => icon switch
    {
        "file-check" => "task_alt",
        "settings" => "settings",
        "zap" => "bolt",
        "scale" => "balance",
        "trending-down" => "trending_down",
        "eco" => "eco",
        _ => "info"
    };
}
